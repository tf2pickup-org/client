<div class="container py-3">
  <a *ngFor="let game of games | async | paginate: {
      itemsPerPage: gamesPerPage,
      currentPage: (page | async),
      totalItems: (gameCount | async)
    }"
    [routerLink]="['/game', game.id]"
    class="game-list-item">
    <div class="game-list-item--content">
      #{{ game.number }} - {{ game.launchedAt | date:'medium' }} - {{ game.map }}

      <div *ngIf="game.state === 'launching' || game.state === 'started'"
        class="game-list-item--live-indicator"
        [tooltip]="game.state"></div>
    </div>
    <img
      [src]="game.map | mapThumbnail"
      class="game-list-item--map-thumbnail">
  </a>

  <!-- <div *ngIf="(gameCount | async) === 0"
    class="d-flex flex-row justify-content-center">
    <span class="text-muted">no games</span>
  </div> -->
</div>

<pagination-template #p="paginationApi" (pageChange)="getPage($event)">
  <nav *ngIf="p.pages.length > 1" class="my-3">
    <ul class="pagination">
      <li
        class="pagination-item"
        [class.disabled]="p.isFirstPage()">
        <a
          [routerLink]=""
          (click)="p.previous()"
          aria-label="Previous">
          <span aria-hidden="true">&laquo;</span>
          <span class="sr-only">Previous</span>
        </a>
      </li>

      <li *ngFor="let page of p.pages"
        class="pagination-item"
        [class.active]="p.getCurrent() === page.value">
        <a
          [routerLink]=""
          (click)="p.setCurrent(page.value)">
          {{ page.label }}
        </a>
      </li>

      <li
        class="pagination-item"
        [class.disabled]="p.isLastPage()">
        <a
          [routerLink]=""
          (click)="p.next()"
          aria-label="Next">
          <span aria-hidden="true">&raquo;</span>
          <span class="sr-only">Next</span>
        </a>
      </li>
    </ul>
  </nav>
</pagination-template>
