<div
  *ngIf="slot"
  [ngClass]="{
    'queue-slot-item--free': !slot.playerId,
    'queue-slot-item--taken': !!slot.playerId,
    'taken-by-me': takenByMe,
    'ready': slot.ready,
    'locked': locked
  }"
  (click)="maybeTakeSlot()">

  <div class="avatar">
    <app-player-avatar *ngIf="slot.playerId"
      [playerId]="slot.playerId"></app-player-avatar>
  </div>

  <a *ngIf="slot.playerId; else addPrompt"
    [routerLink]="['/player', slot.playerId]"
    class="player-name">
    <app-player-name [playerId]="slot.playerId"></app-player-name>
  </a>

  <ng-template #addPrompt>
    <i-feather name="plus" class="add-prompt"></i-feather>
  </ng-template>

  <div class="slot-action">
    <button *ngIf="!locked && takenByMe && !slot.ready"
      type="button"
      class="free-slot-btn"
      (click)="emitFreeSlot($event)"
      tooltip="Free this slot"
      container="body">
      <i-feather name="minus"></i-feather>
    </button>
  </div>

  <button *ngIf="friendFlags.canMarkAsFriend && slot.playerId && !takenByMe"
    type="button"
    class="btn btn-sm slot-action-btn mark-as-friend-btn"
    [ngClass]="friendFlags.markedByMe ? 'btn-danger' : 'btn-light'"
    [tooltip]="friendFlags.markedByMe ? 'Marked as friend' : 'Mark as a friend'"
    [disabled]="!!friendFlags.markedBy"
    (click)="emitMarkFriend(slot.playerId, $event)">
    <span class="oi oi-heart"></span>
  </button>
</div>
